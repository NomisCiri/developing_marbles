Developping\_Marbles
================
Simon
16/01/2019

-   [Marble Data](#marble-data)
-   [look at the subjects.](#look-at-the-subjects.)
-   [Lets have a first Look at the Data](#lets-have-a-first-look-at-the-data)
    -   [Who Wins](#who-wins)
    -   [Risky Choice](#risky-choice)
    -   [How Good were they at Estimating?](#how-good-were-they-at-estimating)
    -   [Who is most Confident?](#who-is-most-confident)
    -   [How does the Estimation Accuracy Relate to Confidence?](#how-does-the-estimation-accuracy-relate-to-confidence)
        -   [Inverse U?](#inverse-u)

# YOU NEED TO USE THE LOG PRECICION AS CONFDENCE MODEL

Marble Data
===========

In this document we have a look at the Data from the Marble Task. We are supposed to have 50 participants pre, 50 post and 50 adolescents who performed a social and solo version of the experiment. They were asked to decide between safe and sure gamble options in order to recieve bonus points. Sometimes the outcome probabilites were described to them as marbles in a jar. On other occasions the outcome probabilites had to be inferred by the participants. This was possible through seeing samples from an urn. Participans always saw 9 pieces of information. Then we asked them for an estimate about the proportion of marbles in that urn. Subsequently we asked how sure there are about this estimate. Only then they made a choice. In the Social trials we showed participants the choices of another subject who completed a similar task before [here is the paper](http://www.tandfonline.com/doi/full/10.1080/87565641.2016.1158265). This made it possible to choose an adviosr with a ralistic choice function. Advisors were selected to make risky choices 20% more than the subject before. The raw data was pretty messy, because it was collected on two servers and every trial has an own column but doesnt save all information. I used [this script](RawData/TidyMarble_JointTask.R) to tidy up.

look at the subjects.
=====================

For some reason this Histogram bins the first subjects together but this is the numebr of trials competed by every subject. 144 as it should be (4\*36). But generally, this looks satisfying and as if i did not screw anything up when coding, saving and making the SQL Data Tidy.

``` r
MarbleData<-read.csv("RawData/TidyMarble.csv")
hist(MarbleData$subject,breaks=length(unique(MarbleData$subject)))
```

![](Analyze_files/figure-markdown_github/cars-1.png)

And here i reformat the stuff i need.

``` r
MarbleData$Agegroup=as.factor(MarbleData$Agegroup)
MarbleData$DFE1DFD0=as.factor(MarbleData$DFE1DFD0)
MarbleData$Social1Ind0=as.factor(MarbleData$Social1Ind0)
MarbleData$PercentBlueEstimate=round(as.numeric(MarbleData$PercentBlueEstimate))
MarbleData$PercentBlueShownRel=round(as.numeric(MarbleData$PercentBlueShownRel),2)
MarbleData$PercentBlueShownRel=as.factor(as.character(MarbleData$PercentBlueShownRel))
MarbleData$HowSure=as.numeric(MarbleData$HowSure)
```

Lets have a first Look at the Data
==================================

Who Wins
--------

Thats the Most intersting thing of all. WHO GETS THE MOST BONUS POINTS? Lets check it.

![](Analyze_files/figure-markdown_github/unnamed-chunk-2-1.png)

lol. Adolescents. This is going to be interesting.

Risky Choice
------------

So lets start to look at the overall proportion of risky desicions, by conditions. We can see (as preregistered) that Adolescent impact of Advice depends less on the Uncertainty Condition than we thought it would. There seems to be a linear Decrease in Risk Taking for Both Condiitions. In "Decisons From Expierience" subjects make less risky choices.

![](Analyze_files/figure-markdown_github/unnamed-chunk-3-1.png)

How Good were they at Estimating?
---------------------------------

In the Decisions from Expierience trials we asked Pariticpants about what they thing the outcome Ditribution really was. So now see if there are age differnces in estimating these distributions. For this i treat the real distributions as factors.

``` r
MarbleData%>%filter(DFE1DFD0=="1"&PercentBlueEstimate!="NULL")%>%ggplot(aes(x=PercentBlueShownRel,y=PercentBlueEstimate,fill=Agegroup))+
  stat_summary(geom="bar",fun.y = "mean",position="dodge")+
  stat_summary(geom="pointrange",fun.y=mean,fun.ymin =function(x) mean(x)-(sd(x)/sqrt(length(x))),fun.ymax=function(x) mean(x)+(sd(x)/sqrt(length(x))),position = position_dodge(0.9))+
  scale_x_discrete(name="Actual Distribution")+
  scale_y_continuous(name="Participants Estimate")+
  ggtitle("Estimation Accuracy")
```

![](Analyze_files/figure-markdown_github/unnamed-chunk-4-1.png)

Turns out they were accurate and captured the trends. While estimating similarly well, Children & Adolescents tended to be overoptimistic in their estimation. Is this a linear trend? This effect looks smaller with higher proportions of blue marbles. Participants also were all Optimistic for low probabilites and Pessimistic for high ones.

Who is most Confident?
----------------------

``` r
MarbleData%>%filter(DFE1DFD0=="1"&PercentBlueEstimate!="NULL")%>%
  ggplot(aes(x=Agegroup,y=HowSure))+
  stat_summary(geom="pointrange",fun.y=mean,fun.ymin =function(x) mean(x)-1.96*(sd(x)/sqrt(length(x))),fun.ymax=function(x) mean(x)+1.96*(sd(x)/sqrt(length(x))),position = position_dodge(0.9))+
  scale_x_discrete(name="Agegroup",breaks=c(0,1,2),labels=c("Kids","Adolescents","Adults"))+
  scale_y_continuous(name="Confidence Rating")+
  ggtitle("Confidence Rating")
```

![](Analyze_files/figure-markdown_github/unnamed-chunk-5-1.png)

Adolescents report to be least confident with their estimation.

How does the Estimation Accuracy Relate to Confidence?
------------------------------------------------------

I compute the difference between the Actual Number shown and the Participants estimate as their Squared Error.

``` r
labels <- c(
  "0" = "Kids",
  "1" = "Adolescents",
  "2" = "Adults"
)

MarbleData%>%filter(DFE1DFD0=="1"&PercentBlueEstimate!="NULL")%>%mutate(
 SquaredError=(as.numeric(PercentBlueEstimate) - as.numeric(PercentBlueShownRel))^2 
)%>%ggplot(aes(x=SquaredError,y=as.numeric(HowSure)))+
  stat_summary(geom="point",fun.y = "mean",position="dodge")+
  stat_smooth(method="loess")+
  stat_summary(geom="pointrange",fun.y=mean,fun.ymin =function(x) mean(x)-(sd(x)/sqrt(length(x))),fun.ymax=function(x) mean(x)+(sd(x)/sqrt(length(x))),position = position_dodge(0.9))+
   facet_grid(.~Agegroup,
             labeller = labeller(Agegroup = labels)
             )+
  scale_x_continuous(name="Squared Estimation Error")+
  scale_y_continuous(name="Confidence")+
  ggtitle("Squared Estimation Error and Confidence")
```

    ## Warning: Width not defined. Set with `position_dodge(width = ?)`

    ## Warning: Removed 3 rows containing missing values (geom_pointrange).

![](Analyze_files/figure-markdown_github/unnamed-chunk-6-1.png)

I cant make much of this inverted U shape. Does this really mean, that when they are super wrong, then they are most confident? This bias seems to be least present in Kids.

### Inverse U?

Maybe the confidence has got more to do with the particiapnts estimate per se than with their accuracy. They seem more confident, the more extreme they judge the distributions to be.

``` r
labels <- c(
  "0" = "Kids",
  "1" = "Adolescents",
  "2" = "Adults"
)


MarbleData%>%filter(DFE1DFD0=="1"&PercentBlueEstimate!="NULL")%>%mutate(
 delta=abs(as.numeric(PercentBlueShownRel)-PercentBlueEstimate) 
)%>%ggplot(aes(x=PercentBlueEstimate,y=HowSure))+
  stat_summary(geom="point",fun.y = "mean",position="dodge")+
  stat_smooth(method="loess")+
  stat_summary(geom="pointrange",fun.y=mean,fun.ymin =function(x) mean(x)-(sd(x)/sqrt(length(x))),fun.ymax=function(x) mean(x)+(sd(x)/sqrt(length(x))),position = position_dodge(0.9))+
 facet_grid(.~Agegroup,
             labeller = labeller(Agegroup = labels)
             )+
  scale_x_continuous(name="Estimate")+
  scale_y_continuous(name="Confidence")
```

    ## Warning: Width not defined. Set with `position_dodge(width = ?)`

    ## Warning: Removed 15 rows containing missing values (geom_pointrange).

![](Analyze_files/figure-markdown_github/unnamed-chunk-7-1.png)
